<!DOCTYPE html>
<html>
  <head>
    <title>Base D3 Map</title>
    <style>
      html, body { height: 100%; font-family: Helvetica, Arial; color: #333; }
      #map { width: 100%; height: 100%; }
      #loading { text-align: center; margin-top: 30%; font-size: 11px; }
      .county {
        fill: none;
        stroke: #AAA;
        stroke-linejoin: round;
        stroke-linecap: round;
      }
    </style>

  </head>
  <body>

    <div id="map">
      <p id="loading">Almost done...</p>
    </div>

    <!-- loading d3 core library -->
    <!-- latest version at http://d3js.org/ -->
    <!-- documentation at https://github.com/mbostock/d3/wiki -->
    <script src="lib/d3/d3.min.js" charset="UTF-8"></script>

    <!-- simple geojson file containing one variable named 'data' -->
    <script src="data/2010_us_20m.js"></script>

    <script>
      // Take a peek at our data, which we loaded above as a script tag.
      // To do so, you'll have to open your web console.
      // Chrome: command + option + J (mac), control + shift + J (win/linux)
      // Firefox: command + option + K (mac), control + shift + K (win/linux)
      console.log(data);

      // Start by defining the width and size of our interactive.
      var width = 960;
      var height = 800;

      // d3.geo.path returns what you can think of a path generator,
      // or a function that takes a set of geographic coordinates, and
      // returns the representative screen coordinates based on a given projection.
      // The default projection is Albers USA.
      var path = d3.geo.path()

      // Here's a list of standard d3 projections:
      // https://github.com/mbostock/d3/wiki/Geo-Projections
      // Try removing the comments from the line below and refreshing your browser.
      // path.projection(d3.geo.stereographic().scale(525).translate([900,950]))

      // Scales are another d3 specialty. They take a 'domain,' aka input values,
      // and produce a 'range' of output values. There are many scales in d3.
      // You can even think of d3.geo.path as a kind of scale for coordinates.
      // Here are more: https://github.com/mbostock/d3/wiki/Scales
      var fill = d3.scale.linear()
        .domain([0, data.features.length])
        .range(['#4dd3ff', '#4dffd3']);

      // So far, d3.select('#map') is similar to jQuery's $('#map').
      // append() and attr() are also familiar if you've used jQuery
      var svg = d3.select('#map').append('svg')
        .attr('width', width)
        .attr('height', height);

      // This is where it gets interesting, and starts to diverge from the
      // jQuery way. In jQuery, you often select elements on the page. In d3,
      // you can select elements that don't yet exist, and d3 will create them.
      // Keep that in mind whenever you see the common pattern below in d3 code.
      svg.selectAll('path')
        .data(data.features)
      .enter().append('path')
        .attr('class', 'county')
        .style('fill', function(d, i) { return fill(i); })
        .attr('d', path);

      // finally, hide our loading place-holder
      d3.select('#loading').style('display', 'none');
    </script>

  </body>
</html>
