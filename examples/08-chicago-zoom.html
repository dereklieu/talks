<!DOCTYPE html>
<html>
  <head>
    <title>Base Map</title>
    <link rel="stylesheet" href="lib/leaflet/leaflet.css" />
    <style>
      html, body { height: 100%; font-family: Helvetica, Arial; color: #333; }
      #map { width: 100%; height: 100%; }
      #loading { text-align: center; margin-top: 30%; font-size: 11px; }
      .leaflet-container { background: none; }
    </style>

  </head>
  <body>

    <div id="map">
    </div>

    <script src="lib/leaflet/leaflet-src.js"></script>
    <script src="lib/topojson/topojson.js"></script>
    <script src="lib/d3/d3.min.js"></script>

    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>

    <script src="data/2014_chicago_crimes_by_ward.js"></script>

    <script>
      var areas = topojson.feature(data, data.objects.community_areas);

      var map = L.map('map', {
        center: [41.9033764,-87.6575705],
        zoom: 10
      });

      var layer = new L.StamenTileLayer('toner');
      map.addLayer(layer);

      var crimeCounts = areas.features.map(function(d) {
        return +d.properties.crimes;
      });

      var fill = d3.scale.quantile()
        .domain(crimeCounts)
        .range(['rgb(254,237,222)','rgb(253,190,133)','rgb(253,141,60)','rgb(230,85,13)','rgb(166,54,3)']);

      var layers = L.geoJson(areas, {
        style: function(d) {
          return {
            color: '#AAA',
            weight: 1,
            fillColor: fill(d.properties.crimes)
          }
        }
      }).addTo(map);


    </script>

  </body>
</html>
